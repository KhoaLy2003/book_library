<div class="px-5">
  <a
    rel="noopener noreferrer"
    class="p-button font-bold no-underline"
    pButton
    icon="pi pi-chevron-left"
    (click)="navigateTo('members')"
  >
  </a>
</div>

<div class="card p-5">
  <p-card header="Member detail information">
    <p-tabView>
      <p-tabPanel header="Detail">
        @if (isLoading) {
        <div class="card flex justify-content-center">
          <p-progressSpinner ariaLabel="loading" styleClass="w-3rem h-3rem" />
        </div>
        } @else {
        <div class="surface-section">
          <ul class="list-none p-0 m-0">
            <li
              class="flex align-items-center py-3 px-2 surface-border flex-wrap"
            >
              <div class="text-500 w-6 md:w-2 font-medium">First Name</div>
              <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">
                {{ currentMember()?.accountFirstName }}
              </div>
            </li>
            <li
              class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"
            >
              <div class="text-500 w-6 md:w-2 font-medium">Last Name</div>
              <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">
                {{ currentMember()?.accountLastName }}
              </div>
            </li>
            <li
              class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"
            >
              <div class="text-500 w-6 md:w-2 font-medium">Email</div>
              <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">
                {{ currentMember()?.accountEmail }}
              </div>
            </li>
            <li
              class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"
            >
              <div class="text-500 w-6 md:w-2 font-medium">Phone Number</div>
              <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">
                {{ currentMember()?.accountPhoneNumber }}
              </div>
            </li>
            <li
              class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"
            >
              <div class="text-500 w-6 md:w-2 font-medium">Address</div>
              <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">
                {{ currentMember()?.accountAddress }}
              </div>
            </li>
            <li
              class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"
            >
              <div class="text-500 w-6 md:w-2 font-medium">Status</div>
              <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">
                <p-tag
                  [value]="getStatusValue(currentMember()?.accountStatus)"
                  [severity]="getMemberSeverity(currentMember()?.accountStatus)"
                />
              </div>
            </li>
            <li
              class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"
            >
              <div class="text-500 w-6 md:w-2 font-medium">
                Membership Number
              </div>
              <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">
                {{ currentMember()?.membershipNumber }}
              </div>
            </li>
            <li
              class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"
            >
              <div class="text-500 w-6 md:w-2 font-medium">
                Membership Start Date
              </div>
              <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">
                {{ currentMember()?.membershipStartDate }}
              </div>
            </li>
            <li
              class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"
            >
              <div class="text-500 w-6 md:w-2 font-medium">
                Membership End Date
              </div>
              <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">
                {{ currentMember()?.membershipEndDate }}
              </div>
            </li>
            <li
              class="flex align-items-center py-3 px-2 border-top-1 surface-border flex-wrap"
            >
              <div class="text-500 w-6 md:w-2 font-medium">Membership Type</div>
              <div class="text-900 w-full md:w-8 md:flex-order-0 flex-order-1">
                <p-tag
                  [value]="getStatusValue(currentMember()?.membershipType)"
                  [severity]="
                    getMembershipServerity(currentMember()?.membershipType)
                  "
                />
              </div>
            </li>
          </ul>
        </div>
        }
      </p-tabPanel>

      <p-tabPanel header="Hisotry">
        <app-borrowing-list
          [borrowingList]="borrowingList()"
          [isLoading]="isLoading"
        />
        @if (borrowingList().length <= 0 && !isLoading) {
        <div class="card flex justify-content-center">
          <p class="text-center font-medium">No data</p>
        </div>
        } @else if(!isLoading) {
        <p-paginator
          (onPageChange)="onPageChange($event)"
          [first]="first()"
          [rows]="rows"
          [totalRecords]="totalElements()"
        ></p-paginator>
        }
      </p-tabPanel>
    </p-tabView>
  </p-card>
</div>
